<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

a {
  text-decoration: none;
}

ul {
  list-style: none;
}

table {
  border-collapse: collapse;
}


/* header */
.flash {
  font-size: 20px;
  background-color:#CC6633;
  color: white;
  height: 30px;
  width: 100%;
  text-align: center;
}

.header {
  border-bottom: 1px solid silver;
}

.container {
  max-width: 1140px;
  margin: 0 auto;
}

.header-top {
  height: 60px;
  display: flex;
  justify-content:space-between;
  color: rgb(100, 100, 100);
  margin-top: 10px;
  margin-bottom: 10px;
}

.header-logo {
  display: flex;
  align-items: flex-end;
}

.header-logo img {
  height: 60px;
  margin-right: 15px;
}

.header-logo h1 {
  font-size: 32px;
}

.header-login a {
  line-height: 60px;
  font-size: 20px;
  color: rgb(100, 100, 100);
}

.header-tab {
  display: flex;
  font-size: 20px;
}

.header-tab {
  width: 1000px;
  margin: 0 auto;
}

.header-tab li {
  height: 50px;
  width: 150px;
  text-align: center;
  line-height: 50px;
  font-weight: bold;
  position: relative;
}

.header-tab a {
  color: #333333;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.header-tab a:hover {
  color: navy;
}

.active {
  border-bottom: 5px solid navy;
}

.active a {
  color: navy;
}
/* header終わり*/


/* ホーム */
/* top-result */
.top-wrapper {
  display: flex;
  justify-content: space-around;
}

.result {
  width: 500px;
  margin: 10px;
}

.result table {
  width: 400px;
  margin: 0 auto;
  font-size: 20px;
}

.result tr {
  height: 50px;
}

.result th {
  background-color: #ddffff;
}

.result td {
  background-color: white;
  text-align: right;
  padding-right: 20px;
  font-weight: bold;
}
/* top-result終わり*/

/* top-quick-entry*/
.quick-entry {
  width: 500px;
  margin: 10px;
}

.section-title {
  font-size: 30px;
  border-bottom: 5px solid silver;
  margin-bottom: 15px;
}

.blue {
  color: blue;
}

.red {
  color: red;
}

.quick-entry form {
  background-color: #eeeeee;
  padding: 20px;
  border-radius: 10px;
}

.field {
  width: 450px;
  font-size: 22px;
  margin-bottom: 5px;
}

.quick-entry label {
  width: 120px;
  float: left;
}

.field input {
  height: 30px;
  font-size: 20px;
  border: 1px solid gray;
}

.field input:focus {
  border: 1px solid blue;
}

.field select {
  height: 30px;
  font-size: 20px;
}

.actions input {
  height: 40px;
  width: 150px;
  color: white;
  font-size: 20px;
  background-color: navy;
  border: none;
  border-radius: 5px;
  display: block;
  margin: 20px auto 0;
}

.actions input:hover {
  background-color: blue;
  cursor: pointer;
  transition: .5s;
}

/* quick-entry内 項目部分 */
ul.menu {
  cursor: pointer;
}

ul.menu:after {
  height: 0;
  visibility: hidden;
  content: ".";
  display: block;
  clear: both;
}

ul.menu li {
  float: left;
  width: 154px;
  height: 30px;
  background-color: white;
  position: relative;
}

ul.menu > li {
  margin-right: 10px;
  border: 1px solid #999;
}

ul.menu li > ul {
  position: relative;
  top: 1px;
  left: -1px;
  border: 1px solid #999;
}

ul.menu li a {
  display: block;
  width: 100%;
  height: 99%;
  line-height: 30px;
  font-size: 20px;
  text-indent: 5px;
  color: #111;
  text-decoration: none;
  position: relative;
}

ul.menu i {
  float: right;
  padding-right: 10px;
  padding-top: 5px;
  color: silver;
}

ul.sub li a:hover {
  background-color: #005FFF;
  color: white;
}

ul.sub li {
  float: none;
  width: 100%;
  border-box: 1px solid #999;
}

ul.sub li ul.sub {
  position: absolute;
  left: 152px;
  top: 0;
  z-index: 10;
}

ul.sub {
  display: none;
  width: 154px;
  z-index: 10;
}

ul.sub-2 li {
  width: 151px;
}
/* quick-entry内 項目部分 終わり */
/* top-quick-entry　終わり*/

/* カレンダー */
.calendar{
  width:70%;
  margin:0 auto;
  margin-top: 30px;
}

td {
  background-color: #fff;
}

.addok{
  background-color: #00ff00 !important;
}

.addwrn{
  background-color: #ff00ff !important;
}

.addng{
  background-color:#ff0000 !important;
}
/* カレンダー終わり */
/* ホーム 終わり*/
</style>

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!--  datepicker用js -->
<script src="http://school.oohara.jp/rtakagi/datepicker.js"></script>
<link rel="stylesheet" href="http://school.oohara.jp/rtakagi/datepicker.css" />
<!--  カレンダー用js -->
<script src='https://school.oohara.jp/rtakagi/js/moment.min.js'></script>
<script src="https://school.oohara.jp/rtakagi/js/fullcalendar.min.js"></script>
<script src="https://school.oohara.jp/rtakagi/js/locale-all.js"></script>
<link rel="stylesheet" href="https://school.oohara.jp/rtakagi/js/fullcalendar.min.css" type="text/css"/>




<span id="star"></span>

<div class="header">
  <div class="container">
    <div class="header-top">
      <div class="header-logo">
        <img src="https://school.oohara.jp/rtakagi/diamond.png" alt="">
        <h1>household acount</h1>
      </div>
      <div class="header-login">
        <% if session[:user_id] %>
          <a>ログインユーザー：<%= session[:user_id] %></a>
        <% end %>
        <%= link_to 'ログイン', new_user_session_path %>
        <%= link_to 'ログアウト', destroy_user_session_path, method: :delete  %>
      </div>
    </div>

    <ul class="header-tab">
      <li class="active"><a href="/"><i class="fas fa-home"></i> ホーム</a></li>
      <li><a href="/posts/year"><i class="far fa-calendar-alt"></i> 月別一覧</a></li>
      <li><a href="/posts/note"><i class="fas fa-book-open"></i></i> 家計簿確認</a></li>
    </ul>
  </div>
</div>












<div class="container">
  <div class="top-wrapper">
    <div class="result">
      <h1 class="section-title">今月の収支</h1>
      <table border="1">
        <tr>
          <th>収入</th>
          <td class="blue"><%= @syunyu %>円</td>
        </tr>
        <tr>
          <th>支出 </th>
          <td class="red"><%= @shisyutu %>円</td>
        </tr>
        <tr>
          <th>収支</th>
          <td><%= @syushi %>円</td>
        </tr>
      </table>
    </div>
    
    <div class="quick-entry">
      <h1 class="section-title">入出金クイック入力</h1>
      <%= form_with model: @post, local: true do |f| %>
        <div class="field">
					<%= f.label :date, '日付' %>
					<span class="today" id="today"></span> <img class="cal1" src="http://school.oohara.jp/yoshikawa/cal.png" width=20px><br>
					<%= f.hidden_field :date, id: "post-date" %>
        </div>

        <div class="field">
					<%= f.label :price, '支出金額' %>
					<%= f.text_field :price %><span> 円</span>
        </div>
        
        <div class="field">
					<%= f.label :category1, '項目' %>
					<%= f.hidden_field :category1, id: "category1" %>
					<%= f.hidden_field :category2, id: "category2" %>
            <ul class="menu">
              <li><a id="menuA">未選択 <i class="fas fa-caret-down"></i></a>
                <ul class="sub">
                  <li><a>生活費 <i class="fas fa-caret-right"></i></a>
                    <ul class="sub">
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('食費');$('#category1').val('1');$('#category2').val('1');">食費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('日用品');$('#category1').val('1');$('#category2').val('2');">日用品</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('衣服・美容費');$('#category1').val('1');$('#category2').val('3');">衣服・美容費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('娯楽費');$('#category1').val('1');$('#category2').val('4');">娯楽費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('交通費');$('#category1').val('1');$('#category2').val('5');">交通費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('教養費');$('#category1').val('1');$('#category2').val('6');">教養費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('医療費');$('#category1').val('1');$('#category2').val('7');">医療費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('交際費');$('#category1').val('1');$('#category2').val('8');">交際費</a></li>
                      <li><a onclick="$('#menuA').html('生活費');$('#menuB').html('その他');$('#category1').val('1');$('#category2').val('9');">その他</a></li>
                    </ul>
                    </li>
                  <li><a>特別支出 <i class="fas fa-caret-right"></i></a>
                    <ul class="sub">
                      <li><a onclick="$('#menuA').html('特別支出');$('#menuB').html('特別支出');$('#category1').val('2');$('#category2').val('1');">特別支出</a></li>
                    </ul>
                    </li>
                  <li><a>固定費 <i class="fas fa-caret-right"></i></a>
                    <ul class="sub">
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('住居費');$('#category1').val('3');$('#category2').val('1');">住居費</a></li>
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('電気代');$('#category1').val('3');$('#category2').val('2');">電気代</a></li>
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('ガス代');$('#category1').val('3');$('#category2').val('3');">ガス代</a></li>
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('水道代');$('#category1').val('3');$('#category2').val('4');">水道代</a></li>
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('通信・電話代');$('#category1').val('3');$('#category2').val('5');">通信・電話代</a></li>
                      <li><a onclick="$('#menuA').html('固定費');$('#menuB').html('携帯電話代');$('#category1').val('3');$('#category2').val('6');">携帯電話代</a></li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li><a id="menuB">未選択 <i class="fas fa-caret-down"></i></a></li>
            </ul>
        </div>
        <div style="clear:both"></div>
        
        <div class="field">
					<%= f.label :article, 'メモ' %>
					<%= f.text_field :article %>
        </div>
        <div class="actions">
					<%= f.submit '登録する' %>
        </div>
      <% end %>
      
    </div>
  </div>
  

  <div class="calendar">
     <div id="cal"></div>
  </div>
  
</div>


<script>
//クイック入力の日付部分
function d() {
    var today = new Date();
    today.setDate(today.getDate());
    var yyyy = today.getFullYear();
    var mm = ("0"+(today.getMonth()+1)).slice(-2);
    var dd = ("0"+today.getDate()).slice(-2);
    document.getElementById("today").innerHTML=yyyy+'年 '+mm+'月'+dd+'日';
    $("#post-date").val(yyyy+'/'+mm+'/'+dd);
}
d();

$(".cal1").gDatePicker({
  //表示形式
  date_format : 'Y年 m月d日',
  //カレンダー開くとき
  onOpen:function(dp){
    return $("#today",dp.parent()).html();
  },
  //カレンダー選択後
  onSelect:function(v,year,month,day,dp){
    $("#today",dp.parent()).html(v);
    $("#post-date").val(year+'/'+month+'/'+day);
  }
});


//クイック入力の項目部分
$("ul.menu li").hover(function(){
    $(">ul:not(:animated)",this).slideDown("fast");
  },function(){
    $(">ul",this).slideUp("fast");
});


//カレンダー
$(document).ready(function(){
  $('#cal').fullCalendar({
    header: {
    },
    height:500,
    locale: 'ja', // the initial locale
    eventLimit: true, // allow "more" link when too many events
    editable: true,
    eventRender: function (event, element) {
      var dataToFind = moment(event.start).format('YYYY-MM-DD');
      if(event.title.substr(0,1)=="●"){
        $("td[data-date='"+dataToFind+"']").addClass('addok');
      }
      if(event.title.substr(0,1)=="△"){
        $("td[data-date='"+dataToFind+"']").addClass('addwrn');
      }
      if(event.title.substr(0,1)=="×"){
        $("td[data-date='"+dataToFind+"']").addClass('addng');
      }
    },
    events:[
      {
        title :"● 予約可能",
        start:"2019-10-15",
      },{
        title :"△ 予約可能",
        start:"2019-10-16"
      },{
        title :"× 予約不可",
        start:"2019-10-18"
      }
    ]
  });
});


//星を降らせる
var hosix=Array(300);
var hosiy=Array(300);
hosix.fill(-1);
hosiy.fill(-1);
var hosicount=0;
var screenx=window.innerWidth;
var screeny=window.innerHeight;
var timer2=setInterval("staranime()",2);

var tmp="";
for(var j=0;j<300;j++){
  tmp+='<div id="s'+j+'"  style="position:fixed;z-index:-1;width:2px;height:2px;background-color:#000"></div>';
}
document.getElementById("star").innerHTML=tmp;

function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}
function staranime(){
  screenx=window.innerWidth;
  screeny=window.innerHeight;
  if(hosicount!=300) hosicount++;
  for(var i=0;i<hosicount;i++){
    if(hosix[i]==-1){
      if(getRandomInt(4)>=2){
        hosix[i]=getRandomInt(screenx);
        hosiy[i]=0;
      }else{
        hosix[i]=0;
        hosiy[i]=getRandomInt(screeny);
      }
    }
    hosix[i]++;
    hosiy[i]++;
    if(hosix[i]>=screenx) hosix[i]=-1;
    if(hosiy[i]>=screeny) hosix[i]=-1;
    $("#s"+i).css("top",hosiy[i]);
    $("#s"+i).css("left",hosix[i]);
   }
}



</script>